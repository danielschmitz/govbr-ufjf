import{$a as r,Aa as M,Ab as V,Bb as F,Cb as z,Da as _,Gb as T,Ja as E,Ka as d,Nb as A,Oa as n,Pa as o,Pb as B,Qa as m,Sb as D,Ta as b,Ua as g,Va as c,W as p,X as u,Ya as y,Yb as N,Za as P,_a as O,ab as q,ac as j,bb as h,c as w,cb as U,db as S,eb as k,fb as I,kc as L,lc as R,pa as C,ra as s,rc as G}from"./chunk-ULTGWXZQ.js";var J=["uploadRef"];function Q(a,t){if(a&1&&m(0,"img",28),a&2){let e=c();d("src",e.previewUrl,C)}}function H(a,t){if(a&1&&m(0,"br-message",29),a&2){let e=c();d("state",e.estadoMensagem)("message",e.mensagem),E("aria-label",e.mensagem)}}function $(a,t){if(a&1){let e=b();n(0,"br-button",30),g("click",function(){p(e);let l=c();return u(l.enviarArquivo())}),r(1," Enviar arquivo "),o()}}function K(a,t){a&1&&(n(0,"div",19),m(1,"br-loading",31),o())}function X(a,t){if(a&1){let e=b();n(0,"br-button",32),g("click",function(){p(e);let l=c();return u(l.limparArquivos())}),r(1," Limpar todos "),o()}}function Y(a,t){if(a&1){let e=b();n(0,"br-button",44),g("click",function(){p(e);let l=c().$implicit,f=c(2);return u(f.visualizarImagem(l))}),r(1," \u{1F441}\uFE0F "),o()}}function Z(a,t){if(a&1){let e=b();n(0,"div",35)(1,"div",36),m(2,"div",37),n(3,"div",38)(4,"span",39),r(5),o(),n(6,"span",40),r(7),o()()(),n(8,"div",41),_(9,Y,2,0,"br-button",42),n(10,"br-button",43),g("click",function(){let l=p(e).index,f=c(2);return u(f.removerArquivo(l))}),r(11," \xD7 "),o()()()}if(a&2){let e=t.$implicit,i=c(2);s(2),d("ngClass",i.getFileIconClass(e.type)),s(3),q(e.name),s(2),U("",(e.size/1024/1024).toFixed(2)," MB | ",e.type||"Tipo desconhecido",""),s(2),d("ngIf",e.type.startsWith("image/"))}}function ee(a,t){if(a&1&&(n(0,"div",33),_(1,Z,12,5,"div",34),o()),a&2){let e=c();s(),d("ngForOf",e.arquivos)}}function te(a,t){a&1&&(n(0,"div",45)(1,"p"),r(2,"Nenhum arquivo selecionado"),o()())}function ie(a,t){if(a&1&&(n(0,"div",46)(1,"p"),r(2),o()()),a&2){let e=c();s(2),h("Total: ",e.getTotalSize()," MB")}}function ne(a,t){if(a&1){let e=b();n(0,"div",47),g("click",function(){p(e);let l=c();return u(l.fecharPreview())}),n(1,"div",48),m(2,"img",49),n(3,"br-button",50),g("click",function(){p(e);let l=c();return u(l.fecharPreview())}),r(4," \xD7 "),o()()()}if(a&2){let e=c();s(2),d("src",e.previewImageUrl,C)}}var W=class a{uploadRef;mensagem="";estadoMensagem="success";previewUrl="";previewImageUrl="";arquivoSelecionado=null;isLoading=!1;arquivoValido=!1;arquivos=[];limparArquivos(){this.arquivos=[]}removerArquivo(t){t>=0&&t<this.arquivos.length&&(this.arquivos.splice(t,1),this.arquivos=[...this.arquivos])}getTotalSize(){return(this.arquivos.reduce((e,i)=>e+i.size,0)/(1024*1024)).toFixed(2)}getFileIconClass(t){return t?t.startsWith("image/")?"icon-image":t.startsWith("video/")?"icon-video":t.startsWith("audio/")?"icon-audio":t.includes("pdf")?"icon-pdf":t.includes("word")||t.includes("document")?"icon-doc":t.includes("excel")||t.includes("sheet")?"icon-excel":t.includes("zip")||t.includes("compressed")?"icon-zip":"icon-file":"icon-file"}handleFile(t){let i=t.target.files?.[0]??null;if(this.previewUrl="",this.arquivoValido=!1,this.mensagem="",!i)return;let l=["image/jpeg","image/png"],f=5,v=i.size/(1024*1024);if(!l.includes(i.type)){this.estadoMensagem="danger",this.mensagem="Formato inv\xE1lido. Apenas JPG e PNG s\xE3o permitidos.";return}if(v>f){this.estadoMensagem="danger",this.mensagem="Arquivo muito grande. O limite \xE9 de 5MB.";return}let x=new FileReader;x.onload=()=>this.previewUrl=x.result,x.readAsDataURL(i),this.arquivoSelecionado=i,this.arquivoValido=!0,this.estadoMensagem="success",this.mensagem=`Arquivo "${i.name}" v\xE1lido e pronto para envio.`}enviarArquivo(){return w(this,null,function*(){if(!this.arquivoSelecionado)return;this.isLoading=!0,this.mensagem="",this.previewUrl="";let t=new FormData;t.append("file",this.arquivoSelecionado);try{if(!(yield fetch("https://httpbin.org/post",{method:"POST",body:t})).ok)throw new Error("Erro no envio.");this.estadoMensagem="success",this.mensagem="Arquivo enviado com sucesso!"}catch{this.estadoMensagem="danger",this.mensagem="Erro ao enviar o arquivo. Tente novamente."}finally{this.isLoading=!1,this.arquivoSelecionado=null,this.arquivoValido=!1,this.uploadRef?.clearFiles?.()}})}visualizarImagem(t){let e=new FileReader;e.onload=()=>{this.previewImageUrl=e.result},e.readAsDataURL(t)}fecharPreview(){this.previewImageUrl=""}static \u0275fac=function(e){return new(e||a)};static \u0275cmp=M({type:a,selectors:[["app-upload"]],viewQuery:function(e,i){if(e&1&&y(J,5),e&2){let l;P(l=O())&&(i.uploadRef=l.first)}},decls:63,vars:11,consts:[["uploadRef",""],["role","main",1,"upload-container"],["show-icon","","state","danger","message","Use ngDefaultControl com [(ngModel)] nos componentes br-upload",1,"mb-4"],[1,"br-card","screen-preview","mb-4"],[1,"screen-header"],[1,"screen-title"],[1,"card-content","d-flex","flex-column","justify-content-evenly","p-4"],["label","Envio de arquivo"],["label","Envio de arquivo","state","danger","accept","image/png, image/jpeg"],["state","danger","is-feedback","","message","Os arquivos devem ser no formato PNG ou JPG e ter no m\xE1ximo 100MB.","show-icon","","aria-label","Os arquivos devem ser no formato PNG ou JPG e ter no m\xE1ximo 100MB.",1,"spacing-feedback","mt-2"],["label","Envio de arquivos","multiple",""],["label","Envio de arquivo","disabled",""],["state","warning","is-feedback","","message","Upload desabilitado","show-icon","","aria-label","Upload desabilitado",1,"spacing-feedback","mt-2"],["label","Selecione uma imagem (JPG ou PNG, at\xE9 5MB)","accept","image/png, image/jpeg","multiple","",3,"change"],["alt","Pr\xE9-visualiza\xE7\xE3o","class","img-preview mt-3",3,"src",4,"ngIf"],["class","mt-2","is-feedback","","show-icon","",3,"state","message",4,"ngIf"],["class","mt-3",3,"click",4,"ngIf"],["class","mt-3",4,"ngIf"],["ngDefaultControl","","label","Envio via ngModel","multiple","","name","uploadArquivos",3,"ngModelChange","ngModel"],[1,"mt-3"],[1,"d-flex","justify-content-between","align-items-center"],[1,"mb-2"],[1,"button-container"],["ngDefaultControl","","density","small","emphasis","secondary",3,"click",4,"ngIf"],["class","file-list",4,"ngIf"],["class","empty-state",4,"ngIf"],["class","upload-stats mt-3",4,"ngIf"],["class","preview-modal",3,"click",4,"ngIf"],["alt","Pr\xE9-visualiza\xE7\xE3o",1,"img-preview","mt-3",3,"src"],["is-feedback","","show-icon","",1,"mt-2",3,"state","message"],[1,"mt-3",3,"click"],["label","Enviando arquivo...","is-medium",""],["ngDefaultControl","","density","small","emphasis","secondary",3,"click"],[1,"file-list"],["class","file-item",4,"ngFor","ngForOf"],[1,"file-item"],[1,"file-info"],["7","",1,"file-icon",3,"ngClass"],[1,"file-details"],[1,"file-name"],[1,"file-meta"],[1,"file-actions"],["circle","","density","small","title","Visualizar imagem",3,"click",4,"ngIf"],["circle","","density","small","title","Remover arquivo",3,"click"],["circle","","density","small","title","Visualizar imagem",3,"click"],[1,"empty-state"],[1,"upload-stats","mt-3"],[1,"preview-modal",3,"click"],[1,"preview-content"],["alt","Pr\xE9-visualiza\xE7\xE3o",3,"src"],["circle","",1,"close-btn",3,"click"]],template:function(e,i){if(e&1){let l=b();n(0,"div",1)(1,"h1"),r(2,"Upload"),o(),n(3,"p"),r(4," Esta p\xE1gina demonstra o uso do componente "),n(5,"code"),r(6,"<br-upload>"),o(),r(7,", com exemplos de estados, valida\xE7\xE3o, preview, envio e loading. "),o(),m(8,"br-message",2),n(9,"div",3)(10,"div",4)(11,"div",5),r(12,"1. Upload simples"),o()(),n(13,"div",6),m(14,"br-upload",7),o()(),n(15,"div",3)(16,"div",4)(17,"div",5),r(18,"2. Com valida\xE7\xE3o e feedback"),o()(),n(19,"div",6),m(20,"br-upload",8)(21,"br-message",9),o()(),n(22,"div",3)(23,"div",4)(24,"div",5),r(25,"3. Upload m\xFAltiplo"),o()(),n(26,"div",6),m(27,"br-upload",10),o()(),n(28,"div",3)(29,"div",4)(30,"div",5),r(31,"4. Upload desabilitado"),o()(),n(32,"div",6),m(33,"br-upload",11)(34,"br-message",12),o()(),n(35,"div",3)(36,"div",4)(37,"div",5),r(38,"5. Upload com preview e envio"),o()(),n(39,"div",6)(40,"br-upload",13,0),g("change",function(v){return p(l),u(i.handleFile(v))}),o(),_(42,Q,1,1,"img",14)(43,H,1,3,"br-message",15)(44,$,2,0,"br-button",16)(45,K,2,0,"div",17),o()(),n(46,"div",3)(47,"div",4)(48,"div",5),r(49,"6. Exemplo com ngModel"),o()(),n(50,"div",6)(51,"br-upload",18),I("ngModelChange",function(v){return p(l),k(i.arquivos,v)||(i.arquivos=v),u(v)}),o(),n(52,"div",19)(53,"div",20)(54,"p",21)(55,"strong"),r(56),o()(),n(57,"div",22),_(58,X,2,0,"br-button",23),o()(),_(59,ee,2,1,"div",24)(60,te,3,0,"div",25)(61,ie,3,1,"div",26),o()()(),_(62,ne,5,1,"div",27),o()}e&2&&(s(42),d("ngIf",i.previewUrl),s(),d("ngIf",i.mensagem),s(),d("ngIf",i.arquivoValido&&!i.isLoading),s(),d("ngIf",i.isLoading),s(6),S("ngModel",i.arquivos),s(5),h("Arquivos selecionados (",i.arquivos.length,"):"),s(2),d("ngIf",i.arquivos.length>0),s(),d("ngIf",i.arquivos.length>0),s(),d("ngIf",i.arquivos.length===0),s(),d("ngIf",i.arquivos.length>0),s(),d("ngIf",i.previewImageUrl))},dependencies:[T,V,F,z,N,A,B,D,G,R,j,L],styles:['@charset "UTF-8";.upload-container[_ngcontent-%COMP%]{padding:20px}.screen-preview[_ngcontent-%COMP%]{border:1px solid #e0e0e0;border-radius:8px;background-color:#f5f5f5;overflow:hidden;margin-bottom:1.5rem}.screen-header[_ngcontent-%COMP%]{background-color:#1351b4;color:#fff;padding:10px 15px;font-weight:700;display:flex;align-items:center}.screen-title[_ngcontent-%COMP%]{font-size:1.1rem}.card-content[_ngcontent-%COMP%]{padding:20px;background-color:#fff}.d-flex[_ngcontent-%COMP%]{display:flex}.flex-column[_ngcontent-%COMP%]{flex-direction:column}.justify-content-evenly[_ngcontent-%COMP%]{justify-content:space-evenly}.p-4[_ngcontent-%COMP%]{padding:1.5rem}.mt-2[_ngcontent-%COMP%]{margin-top:.75rem}.mt-3[_ngcontent-%COMP%]{margin-top:1rem}.mb-4[_ngcontent-%COMP%]{margin-bottom:1.5rem}.img-preview[_ngcontent-%COMP%]{max-width:100%;max-height:300px;margin:1rem auto;border-radius:4px;display:block}.file-list[_ngcontent-%COMP%]{border:1px solid #e6e6e6;border-radius:4px;margin-top:10px}.file-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:10px 15px;border-bottom:1px solid #e6e6e6}.file-item[_ngcontent-%COMP%]:last-child{border-bottom:none}.file-info[_ngcontent-%COMP%]{display:flex;align-items:center;flex:1}.file-details[_ngcontent-%COMP%]{margin-left:10px;display:flex;flex-direction:column}.file-name[_ngcontent-%COMP%]{font-weight:500;margin-bottom:2px}.file-meta[_ngcontent-%COMP%]{font-size:.8rem;color:#666}.file-icon[_ngcontent-%COMP%]{width:32px;height:32px;display:flex;align-items:center;justify-content:center;background-color:#f0f0f0;border-radius:4px}.icon-file[_ngcontent-%COMP%]:before{content:"\\1f4c4"}.icon-image[_ngcontent-%COMP%]:before{content:"\\1f5bc\\fe0f"}.icon-pdf[_ngcontent-%COMP%]:before{content:"\\1f4d1"}.icon-video[_ngcontent-%COMP%]:before{content:"\\1f3a5"}.icon-audio[_ngcontent-%COMP%]:before{content:"\\1f3b5"}.icon-doc[_ngcontent-%COMP%]:before{content:"\\1f4dd"}.icon-excel[_ngcontent-%COMP%]:before{content:"\\1f4ca"}.icon-zip[_ngcontent-%COMP%]:before{content:"\\1f5dc\\fe0f"}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:20px;color:#666;background-color:#f5f5f5;border-radius:4px}.upload-stats[_ngcontent-%COMP%]{font-size:.9rem;color:#666;text-align:right}.button-container[_ngcontent-%COMP%]{display:flex;gap:8px}.mb-2[_ngcontent-%COMP%]{margin-bottom:.5rem}.justify-content-between[_ngcontent-%COMP%]{justify-content:space-between}.align-items-center[_ngcontent-%COMP%]{align-items:center}.preview-modal[_ngcontent-%COMP%]{position:fixed;inset:0;background-color:#000000b3;display:flex;align-items:center;justify-content:center;z-index:1000}.preview-content[_ngcontent-%COMP%]{position:relative;max-width:90%;max-height:90%}.preview-content[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:100%;max-height:80vh;border-radius:4px;box-shadow:0 0 20px #00000080}.close-btn[_ngcontent-%COMP%]{position:absolute;top:-20px;right:-20px;background-color:#fff;color:#333;border:none;border-radius:50%;width:32px;height:32px;font-size:18px;cursor:pointer;box-shadow:0 0 10px #0000004d}.file-actions[_ngcontent-%COMP%]{display:flex;gap:8px}.danger[_ngcontent-%COMP%]{background-color:#e52207;color:#fff}']})};export{W as UploadComponent};
